# 🤖 AI Expense Tracker Telegram Bot

**מערכת חכמה לניהול הוצאות אישי בטלגרם, מבוססת בינה מלאכותית.**

הפרויקט הזה הוא בוט טלגרם שנכתב ב-**Node.js & TypeScript**. הוא מאפשר למשתמשים לנהל את המעקב הפיננסי שלהם באמצעות שיחה טבעית בעברית (NLP). המערכת משתמשת במודלי שפה מתקדמים (LLMs) כדי להבין הקשר, לחלץ נתונים, ולבצע פעולות מורכבות במסד נתונים.

---

## ✨ פיצ'רים מרכזיים

### 🧠 בינה מלאכותית והבנת שפה (NLP)
* **הוספה טבעית:** "קניתי פיצה ב-50 וג'ינס בזארה ב-200" (המערכת תפריד לשתי הוצאות שונות ותזהה קטגוריות).
* **זיכרון שיחה (Context Awareness):** אם המשתמש כותב "קניתי חולצה" והבוט שואל "כמה עלה?", המשתמש יכול לענות "100" והבוט יבין לבד שזה המחיר של החולצה.
* **זיהוי זמנים חכם:** תמיכה בביטויים כמו "אתמול ב-5 בערב", "שלשום", "לפני שעה".

### 🛡️ אבטחה וניהול משתמשים
* **אימות דו-שלבי:** אימות משתמשים באמצעות מנגנון `Contact Request` של טלגרם למניעת התחזות.
* **הגנות לוגיות:** מניעת הזנת תאריכים עתידיים, ולידציה של סכומים ושמות.

### ⚙️ יכולות עריכה מתקדמות (CRUD)
* **עדכון חכם:** "תשנה את התאריך של הג'ינס לאתמול" (משנה רק תאריך, שומר על המחיר).
* **חיפוש גמיש (Fuzzy Search):** מוצא פריטים גם אם יש שגיאות כתיב קלות או הבדלים בגרשיים ("גינס" לעומת "ג'ינס").
* **מחיקה:** מחיקת פריט ספציפי ("תמחק את הפיצה") או מחיקה גורפת ("תמחק את כל ההוצאות על דלק").
* **דוחות:** הפקת דוח הוצאות מעוצב עם סיכום כספי.

---

## 🛠 Tech Stack (טכנולוגיות)

* **Runtime:** Node.js
* **Language:** TypeScript
* **Framework:** Telegraf.js (Telegram Bot API)
* **AI:** OpenAI SDK (connected to **Groq** running **Llama 3.3 70B**)
* **Database:** PostgreSQL (Production) / SQLite (Dev)
* **ORM:** Prisma
* **Hosting:** Render (App) + Neon (DB)

---

## 🚀 התקנה והרצה מקומית

### 1. שכפול הפרויקט
```bash
git clone https://github.com/YourUsername/expense-tracker-bot.git
cd backend
````

### 2\. התקנת תלויות

```bash
npm install
```

### 3\. הגדרת משתני סביבה (.env)

צור קובץ `.env` בתיקייה הראשית והגדר את המשתנים הבאים:

```env
# Database Connection (SQLite for local, Postgres for prod)
DATABASE_URL="file:./dev.db"

# Telegram Bot Token (from @BotFather)
TELEGRAM_BOT_TOKEN="your_telegram_token_here"

# AI Provider API Key (Groq)
GROQ_API_KEY="your_groq_api_key_here"

# Server Port
PORT=3000
```

### 4\. בניית בסיס הנתונים

```bash
npx prisma migrate dev --name init
```

### 5\. הרצת השרת (מצב פיתוח)

```bash
npm run dev
```

השרת ירוץ כעת, והבוט יתחיל להגיב בטלגרם\!

-----

## 💬 מדריך למשתמש (דוגמאות לשיחה)

הנה כמה דוגמאות למה שאפשר להגיד לבוט:

| פעולה | דוגמה לפקודה |
| :--- | :--- |
| **הוספת הוצאה** | "קניתי סושי ב-80" |
| **הוספה מרובה** | "דלק ב-200 וקניות בסופר ב-450" |
| **הוספה עם סיפור** | "הייתי אתמול בקניון וקניתי נעליים ב-300" |
| **הפקת דוח** | "תביא לי דוח" / "רשימה" |
| **תיקון מחיר** | "תשנה את הסושי ל-100" |
| **תיקון תאריך** | "תשנה את התאריך של הנעליים לאתמול ב-10" |
| **מחיקה** | "תמחק את הפיצה" |
| **מחיקה גורפת** | "תמחק את כל ההוצאות על מוניות" |
| **איפוס מלא** | "תאפס הכל" (מוחק את כל ההיסטוריה שלך) |

-----

## 📂 מבנה הפרויקט

```
src/
├── controllers/    # API Controllers (לשימוש עתידי באתר Web)
├── services/
│   ├── openai.service.ts    # המוח: ניתוח טקסט, פרומפטים, וניהול הקשר
│   └── telegram.service.ts  # הבוט: לוגיקת שיחה, אבטחה, ועיצוב הודעות
├── prisma/
│   └── schema.prisma        # הגדרת הטבלאות (User, Expense, ConversationState)
├── app.ts          # הגדרת שרת Express
└── index.ts        # נקודת הכניסה (Entry Point)
```

-----

## 🔮 תוכניות לעתיד (Roadmap)

  - [ ] בניית דשבורד React לצפייה בגרפים ופילוחים.
  - [ ] הוספת תמיכה בתזכורות (Cron Jobs) להוצאות קבועות.
  - [ ] יצוא נתונים לאקסל/CSV ישירות מהטלגרם.

-----


```
```
